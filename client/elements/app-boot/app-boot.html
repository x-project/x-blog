<link rel="import" href="/components/app-routes/app-routes.html">
<link rel="import" href="/components/app-route/app-route.html">
<link rel="import" href="/components/app-container/app-container.html">
<link rel="import" href="/components/app-session/app-session.html">
<link rel="import" href="/elements/app-theme/app-theme.html">
<link rel="import" href="/elements/page-about/page-about.html">
<link rel="import" href="/elements/page-contact/page-contact.html">
<link rel="import" href="/elements/page-home/page-home.html">
<link rel="import" href="/elements/page-privacy/page-privacy.html">
<link rel="import" href="/elements/page-test/page-test.html">
<link rel="import" href="/elements/page-login/page-login.html">
<link rel="import" href="/elements/page-portfolio/page-portfolio.html">
<link rel="import" href="/elements/page-reset/page-reset.html">
<link rel="import" href="/elements/page-settings/page-settings.html">
<link rel="import" href="/elements/page-signup/page-signup.html">
<dom-module id="app-boot">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>

    <app-session id="session"></app-session>

    <app-container id="app" on-mount="on_mount"
      on-login="on_login" on-signup="on_signup" on-logout="on_logout">
    </app-container>

    <app-routes id="routes">
      <app-route path="/" page="page-home" on-route="/home"></app-route>
      <app-route path="/about" page="page-about" on-route="/about"></app-route>
      <app-route path="/contact" page="page-contact" on-route="/contact"></app-route>
      <app-route path="/home" page="page-home" on-route="/home"></app-route>
      <app-route path="/privacy" page="page-privacy" on-route="/privacy"></app-route>
      <app-route path="/portfolio" page="page-portfolio"></app-route>
      <app-route path="/login" page="page-login" on-route="/login"></app-route>
      <app-route path="/reset" page="page-reset" on-route="/reset"></app-route>
      <app-route path="/signup" page="page-signup" on-route="/signup"></app-route>
      <app-route path="/settings" page="page-settings" on-route="/settings"></app-route>
    </app-routes>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'app-boot',

    properties: {
      user: {
        type: Object
      }
    },

    on_mount: function (event) {
      event.detail.user = this.user;
    },

    on_login: function (event) {},

    on_signup: function (event) {},

    on_logout: function (event) {},

    '/home': function (event) {},

    '/about': function (event) {},

    '/contact': function (event) {},

    '/privacy': function (event) {},

    '/login': function (event) {
      if (this.user) {
        event.stopPropagation();
        page('/');
        return;
      }
    },

    '/reset': function (event) {
      if (this.user) {
        event.stopPropagation();
        page('/');
        return;
      }
    },

    '/signup': function (event) {
      if (this.user) {
        event.stopPropagation();
        page('/');
        return;
      }
    },

    '/settings': function (event) {
      if (!this.user) {
        event.stopPropagation();
        page('/login');
        return;
      }
    }

  });
</script>