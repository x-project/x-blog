<link rel="import" href="/components/polymer/polymer.html">
<link rel="import" href="/components/api-s3-delete/api-s3-delete.html">
<dom-module id="part-s3-list-item">
  <style>
    :host {
      display: inline-block;
    }

    #image {
      display: inline-block;
    }

    #thumb {
      width: 100%;
      height: auto;
    }
    #image_labels {
      color: darkgrey;
    }
    #image_details{
      color: black;
    }
    #thumb[preview="true"] {
      width: 200px;
    }
  </style>
  <template>

    <api-s3-delete id="request" file_name="{{item.key}}"></api-s3-delete>

    <div id="image">
      <img id="thumb" src="{{item.url}}" preview$="{{preview}}">
      <template is="dom-if" if="{{preview}}">
        <ul id="image_labels">
          <li>Name: <span id="image_details">{{item.key}}</span></li>
          <li>Modified: <span id="image_details">{{dateFormat(item.lastmodified)}}</span></li>
          <li>Size: <span id="image_details">{{sizeFormat(item.size)}}</span> KB</li>
        </ul>
        <button id="delete" on-click="delete_image">delete</button>
      </template>
    </div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'part-s3-list-item',

    properties: {
      item: {
        type: Object
      },
      preview: {
        type: Boolean,
        value: false
      }
    },

    delete_image: function () {
      this.$.request.send();
    },
    dateFormat: function (date) {
      date = date.substring(0,10);
      return date;
    },
    sizeFormat: function (size) {
      size = parseInt(size)/1000;
      return size;
    }
});
</script>
